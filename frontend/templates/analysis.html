{% extends "base.html" %} {% block title %}Análises Visuais - E-commerce
Analytics{% endblock %} {% block content %}
<div class="col-12">
  <div class="container-fluid mt-4">
    <!-- Header -->
    <div class="row">
      <div class="col-12">
        <h2 class="mb-1">
          <i class="fas fa-chart-bar me-2 text-success"></i>
          Análises Visuais E-commerce
        </h2>
        <p class="text-muted">
          Explore comportamento de clientes com visualizações interativas e
          personalizadas
        </p>
      </div>
    </div>

    <!-- Control Panel -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">
              <i class="fas fa-sliders-h me-2"></i>
              Configurações de Visualização
            </h5>
          </div>
          <div class="card-body">
            <form>
              <div class="row">
                <div class="col-md-3 mb-3">
                  <label for="chartType" class="form-label"
                    >Tipo de Gráfico</label
                  >
                  <select class="form-select" id="chartType">
                    <option value="scatter">Dispersão</option>
                    <option value="line">Linha</option>
                    <option value="bar">Barras</option>
                    <option value="histogram">Histograma</option>
                    <option value="box">Box Plot</option>
                    <option value="heatmap">Mapa de Calor</option>
                  </select>
                </div>
                <div class="col-md-3 mb-3">
                  <label for="xVariable" class="form-label">Variável X</label>
                  <select class="form-select" id="xVariable">
                    <option value="age">Idade</option>
                    <option value="total_amount">Valor Total</option>
                    <option value="session_duration">Duração da Sessão</option>
                    <option value="pages_viewed">Páginas Visitadas</option>
                    <option value="delivery_time">Tempo de Entrega</option>
                  </select>
                </div>
                <div class="col-md-3 mb-3">
                  <label for="yVariable" class="form-label">Variável Y</label>
                  <select class="form-select" id="yVariable">
                    <option value="customer_rating">Rating do Cliente</option>
                    <option value="total_amount">Valor Total</option>
                    <option value="session_duration">Duração da Sessão</option>
                    <option value="pages_viewed">Páginas Visitadas</option>
                    <option value="discount_amount">Desconto</option>
                  </select>
                </div>
                <div class="col-md-3 mb-3">
                  <label for="groupBy" class="form-label">Agrupar por</label>
                  <select class="form-select" id="groupBy">
                    <option value="">Nenhum</option>
                    <option value="product_category">Categoria</option>
                    <option value="gender">Gênero</option>
                    <option value="device_type">Dispositivo</option>
                    <option value="payment_method">Forma de Pagamento</option>
                    <option value="city">Cidade</option>
                  </select>
                </div>
              </div>
              <div class="row">
                <div class="col-12">
                  <button
                    type="button"
                    class="btn btn-primary"
                    onclick="generateChart()"
                  >
                    <i class="fas fa-chart-line me-2"></i>
                    Gerar Visualização
                  </button>
                  <button
                    type="button"
                    class="btn btn-outline-secondary ms-2"
                    onclick="downloadChart()"
                  >
                    <i class="fas fa-download me-2"></i>
                    Baixar Gráfico
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Charts Row -->
    <div class="row mb-4">
      <!-- Main Chart -->
      <div class="col-lg-8">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">
              <i class="fas fa-chart-area me-2"></i>
              Rating do Cliente vs Valor Total
            </h5>
          </div>
          <div class="card-body">
            <canvas id="mainChart" height="120"></canvas>
          </div>
        </div>
      </div>

      <!-- Statistics -->
      <div class="col-lg-4">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">
              <i class="fas fa-calculator me-2"></i>
              Estatísticas Descritivas
            </h5>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="table table-sm">
                <tbody>
                  <tr>
                    <td><strong>Valor Médio:</strong></td>
                    <td>R$ 247,83</td>
                  </tr>
                  <tr>
                    <td><strong>Mediana:</strong></td>
                    <td>R$ 210,00</td>
                  </tr>
                  <tr>
                    <td><strong>Desvio Padrão:</strong></td>
                    <td>R$ 156,92</td>
                  </tr>
                  <tr>
                    <td><strong>Mínimo:</strong></td>
                    <td>R$ 28,00</td>
                  </tr>
                  <tr>
                    <td><strong>Máximo:</strong></td>
                    <td>R$ 2,850,00</td>
                  </tr>
                  <tr>
                    <td><strong>Rating Médio:</strong></td>
                    <td>4.1 ⭐</td>
                  </tr>
                  <tr>
                    <td><strong>Sessão Média:</strong></td>
                    <td>15.2 min</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="mt-3">
              <h6>Correlação com Rating:</h6>
              <div class="mb-2">
                <small>Valor Total: <strong>0.23</strong></small>
                <div class="progress">
                  <div class="progress-bar bg-warning" style="width: 23%"></div>
                </div>
              </div>
              <div class="mb-2">
                <small>Duração Sessão: <strong>0.41</strong></small>
                <div class="progress">
                  <div class="progress-bar bg-info" style="width: 41%"></div>
                </div>
              </div>
              <div class="mb-2">
                <small>Tempo Entrega: <strong>-0.67</strong></small>
                <div class="progress">
                  <div class="progress-bar bg-danger" style="width: 67%"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Secondary Charts -->
    <div class="row mb-4">
      <div class="col-lg-6">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">
              <i class="fas fa-chart-pie me-2"></i>
              Distribuição por Categoria de Produto
            </h5>
          </div>
          <div class="card-body">
            <canvas id="categoryChart"></canvas>
          </div>
        </div>
      </div>

      <div class="col-lg-6">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">
              <i class="fas fa-mobile-alt me-2"></i>
              Comportamento por Dispositivo
            </h5>
          </div>
          <div class="card-body">
            <canvas id="deviceBehaviorChart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- Analysis Insights -->
    <div class="row mb-4">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h5 class="mb-0">
              <i class="fas fa-lightbulb me-2"></i>
              Insights Automáticos E-commerce
            </h5>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-4">
                <div class="alert alert-info">
                  <h6>
                    <i class="fas fa-info-circle me-2"></i>Comportamento de
                    Compra
                  </h6>
                  <p class="mb-0">
                    Clientes que passam mais tempo no site (sessões +20min) têm
                    rating 18% maior, indicando melhor experiência de navegação.
                  </p>
                </div>
              </div>
              <div class="col-md-4">
                <div class="alert alert-warning">
                  <h6>
                    <i class="fas fa-exclamation-triangle me-2"></i>Tempo de
                    Entrega
                  </h6>
                  <p class="mb-0">
                    Forte correlação negativa (-0.67) entre tempo de entrega e
                    satisfação. Entregas +7 dias resultam em ratings baixos.
                  </p>
                </div>
              </div>
              <div class="col-md-4">
                <div class="alert alert-success">
                  <h6>
                    <i class="fas fa-check-circle me-2"></i>Categorias Top
                  </h6>
                  <p class="mb-0">
                    Electronics e Fashion representam 50% das vendas e têm os
                    maiores valores médios por transação.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %} {% block scripts %}
<script>
  // Main Chart - Rating vs Total Amount
  const mainCtx = document.getElementById("mainChart").getContext("2d");
  new Chart(mainCtx, {
    type: "scatter",
    data: {
      datasets: [
        {
          label: "Rating vs Valor Total",
          data: [
            { x: 54.28, y: 5 },
            { x: 244.9, y: 3 },
            { x: 240.75, y: 2 },
            { x: 574.78, y: 4 },
            { x: 122.46, y: 5 },
            { x: 427.28, y: 5 },
            { x: 1091.11, y: 4 },
            { x: 138.9, y: 3 },
            { x: 593.64, y: 5 },
            { x: 81.91, y: 4 },
            { x: 431.85, y: 4 },
            { x: 596.74, y: 5 },
          ],
          backgroundColor: "rgba(54, 162, 235, 0.5)",
          borderColor: "rgba(54, 162, 235, 1)",
          borderWidth: 2,
        },
      ],
    },
    options: {
      responsive: true,
      scales: {
        x: {
          display: true,
          title: {
            display: true,
            text: "Valor Total (R$)",
          },
        },
        y: {
          display: true,
          title: {
            display: true,
            text: "Rating do Cliente",
          },
          min: 1,
          max: 5,
        },
      },
    },
  });

  // Category Distribution Chart
  const catCtx = document.getElementById("categoryChart").getContext("2d");
  new Chart(catCtx, {
    type: "doughnut",
    data: {
      labels: [
        "Electronics",
        "Fashion",
        "Food",
        "Sports",
        "Beauty",
        "Books",
        "Home & Garden",
        "Toys",
      ],
      datasets: [
        {
          data: [28.3, 22.1, 18.7, 15.9, 8.2, 4.1, 2.2, 0.5],
          backgroundColor: [
            "#007bff",
            "#28a745",
            "#ffc107",
            "#fd7e14",
            "#e83e8c",
            "#6f42c1",
            "#20c997",
            "#dc3545",
          ],
        },
      ],
    },
    options: {
      responsive: true,
      plugins: {
        legend: {
          position: "bottom",
        },
      },
    },
  });

  // Device Behavior Chart
  const deviceCtx = document
    .getElementById("deviceBehaviorChart")
    .getContext("2d");
  new Chart(deviceCtx, {
    type: "bar",
    data: {
      labels: ["Mobile", "Desktop", "Tablet"],
      datasets: [
        {
          label: "Sessão Média (min)",
          data: [12.5, 18.7, 15.2],
          backgroundColor: "#007bff",
        },
        {
          label: "Páginas Vistas",
          data: [8.3, 11.2, 9.8],
          backgroundColor: "#28a745",
        },
        {
          label: "Rating Médio",
          data: [4.0, 4.3, 4.1],
          backgroundColor: "#ffc107",
        },
      ],
    },
    options: {
      responsive: true,
      plugins: {
        legend: {
          position: "top",
        },
      },
    },
  });

  // Interactive functions
  function generateChart() {
    alert(
      "Gerando nova visualização com base nas configurações selecionadas..."
    );
  }

  function downloadChart() {
    alert("Baixando gráfico atual...");
  }
</script>
{% endblock %}
